(function () {
	'use strict';

	var app = angular.module('starter');

	app.controller('WeatherCtrl', function ($rootScope, $scope, $state, $http, $interval, owm, Socket, Config){
		console.info('WeatherCtrl --> LOADED');
				

		/********************************************************************************************/
		/********************************* SOCKET LISTENERS - START *********************************/



		/********************************** SOCKET LISTENERS - END **********************************/
		/********************************************************************************************/



		/********************************************************************************************/
		/********************************** PUBLIC METHODS - START **********************************/

		$scope.getWeather = function () {
			owm.current.name('Cluj-Napoca,RO').then(function(weather) {
                $scope.weather = weather;
                console.info('Weather: %O', $scope.weather);
                
                $scope.weatherIcon = 'wi-' + owm.icons.day(weather.weather[0].id);
                console.log('weatherIcon: %s', $scope.weatherIcon);

            });
		};

		/*********************************** PUBLIC METHODS - END ***********************************/
		/********************************************************************************************/





		/********************************************************************************************/
		/********************************* PRIVATE METHODS - START **********************************/

		

		/********************************** PRIVATE METHODS - END ***********************************/
		/********************************************************************************************/





		/********************************************************************************************/
		/************************************ RUN ONLOAD - START ************************************/

		$scope.getWeather();
		$interval(function () {
			$scope.getWeather();
		}, 900000);

		/************************************* RUN ONLOAD - END *************************************/
		/********************************************************************************************/


	});

})();